#ifndef __TOUCH_H__
#define __TOUCH_H__
#include "sys.h"
#include "ott2001a.h"	    
#include "gt9147.h"	    
#include "ft5206.h"	    
//////////////////////////////////////////////////////////////////////////////////	 
//???????????????¦Ä???????????????????????¦Ê????
//ALIENTEK STM32??????
//??????????(???ADS7843/7846/UH7843/7846/XPT2046/TSC2046/OTT2001A/GT9147/FT5206??)????	   
//???????@ALIENTEK
//???????:www.openedv.com
//????????:2015/1/15
//?·Ú??V1.0
//??????§µ?????????
//Copyright(C) ????????????????????? 2009-2019
//All rights reserved						 
//////////////////////////////////////////////////////////////////////////////////

#define TP_PRES_DOWN 0x80  		//??????????	  
#define TP_CATH_PRES 0x40  		//?§Ñ????????? 
#define CT_MAX_TOUCH  5    		//?????????????,????5??

//????????????
typedef struct 
{
	u8 (*init)(void);			//³õÊ¼»¯µç×èÆÁ
	u8 (*scan)(u8);				//??°Ü????.0,??????;1,????????;	 
	void (*adjust)(void);		//??????§µ? 
	u16 x[CT_MAX_TOUCH]; 		//???????
	u16 y[CT_MAX_TOUCH];		//???????????5??????,??????????x[0],y[0]????:???????,??????????,??
								//x[4],y[4]?›¥???????????????. 
	u8  sta;					//????? 
								//b7:????1/???0; 
	                            //b6:0,??§Ñ???????;1,?§Ñ???????. 
								//b5:????
								//b4~b0:?????????????????(0,???¦Ä????,1???????)
/////////////////////??????§µ?????(???????????§µ?)//////////////////////								
	float xfac;		//Ð±ÂÊ
	float yfac;
	short xoff;    //Æ«ÒÆ
	short yoff;	   
//?????????,???????????????????????????????.
//b0:0,????(????????X????,?????Y?????TP)
//   1,????(????????Y????,?????X?????TP) 
//b1~6:????.
//b7:0,??????
//   1,?????? 
	u8 touchtype;
}_m_tp_dev;

extern _m_tp_dev tp_dev;	 	//????????????touch.c???ÕÇ??

//????/??????§à?????????	   
#define PEN  		PCin(1)  	//PC1  INT
#define DOUT 		PCin(2)   	//PC2  MISO
#define TDIN 		PCout(3)  	//PC3  MOSI
#define TCLK 		PCout(0)  	//PC0  SCLK
#define TCS  		PCout(13)  	//PC13 CS 
   
//??????????
void TP_Write_Byte(u8 num);						//?????§à?§Õ?????????
u16 TP_Read_AD(u8 CMD);							//???AD????
u16 TP_Read_XOY(u8 xy);							//?????????????(X/Y)
u8 TP_Read_XY(u16 *x,u16 *y);					//???????(X+Y)
u8 TP_Read_XY2(u16 *x,u16 *y);					//?????????????????????
void TP_Drow_Touch_Point(u16 x,u16 y,u16 color);//?????????§µ???
void TP_Draw_Big_Point(u16 x,u16 y,u16 color);	//????????
void TP_Save_Adjdata(void);						//????§µ?????
u8 TP_Get_Adjdata(void);						//???§µ?????
void TP_Adjust(void);							//??????§µ?
void TP_Adj_Info_Show(u16 x0,u16 y0,u16 x1,u16 y1,u16 x2,u16 y2,u16 x3,u16 y3,u16 fac);//???§µ????
//??????/?????? ???¨²???
u8 TP_Scan(u8 tp);								//???
u8 TP_Init(void);								//?????
 
#endif

















